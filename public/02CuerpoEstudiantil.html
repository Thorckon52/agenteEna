<!DOCTYPE html>
<html lang="es">
  
  <head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Document</title>
    <link href="style.css" rel="stylesheet"/>
  </head>
  
  <body>
   
    <header class="main-header">
      <div class="header-left">
        <img alt="Logo Escuela Nueva" class="logo" src="Images/logo.png"/>
        <h1 class="header-title">Asistente de Planeación Escuela Nueva Activa</h1>
      </div>
      <div class="header-right">
        <div class="line-with-hexagon">
      <svg fill="#fff" height="18" viewbox="0 0 17 18" width="17" xmlns="http://www.w3.org/2000/svg">
<path d="M5.5481 1.74664C5.66453 1.58825 5.85386 1.50841 6.03582 1.54099L12.2487 2.65368C12.4132 2.68319 12.5472 2.79993 12.6032 2.96312L14.9298 9.74299C14.9857 9.90615 14.9557 10.0921 14.8505 10.2353L10.8754 15.6439C10.759 15.8022 10.5696 15.882 10.3877 15.8495L4.17478 14.7368C4.01029 14.7074 3.87643 14.5905 3.82036 14.4274L1.49375 7.64751C1.43774 7.48427 1.46774 7.29845 1.57304 7.15519L5.5481 1.74664Z" stroke="#0C67B3" stroke-width="3"></path>
</svg>
<svg fill="none" height="3" viewbox="0 0 554 3" width="554" xmlns="http://www.w3.org/2000/svg">
<path d="M0 1.5H553.457" stroke="#0C67B3" stroke-width="3"></path>
</svg>
</div></div>
</header>


<content>
<div class="form-wrapper"><form class="form-card">
<div class="progress-module">
<div class="hex-steps">
    <!-- 7 hexágonos -->
    <div class="hex inactive"><svg viewbox="0 0 100 100"><path d="M50 5 L90 25 L90 75 L50 95 L10 75 L10 25 Z"></path></svg></div>
    <div class="hex active">
    <svg viewbox="0 0 100 100"> <path d="M50 5 L90 25 L90 75 L50 95 L10 75 L10 25 Z"></path> </svg> </div>
    <div class="hex inactive"><svg viewbox="0 0 100 100"><path d="M50 5 L90 25 L90 75 L50 95 L10 75 L10 25 Z"></path></svg></div>
    <div class="hex inactive"><svg viewbox="0 0 100 100"><path d="M50 5 L90 25 L90 75 L50 95 L10 75 L10 25 Z"></path></svg></div>
    <div class="hex inactive"><svg viewbox="0 0 100 100"><path d="M50 5 L90 25 L90 75 L50 95 L10 75 L10 25 Z"></path></svg></div>
    <div class="hex inactive"><svg viewbox="0 0 100 100"><path d="M50 5 L90 25 L90 75 L50 95 L10 75 L10 25 Z"></path></svg></div>
    <div class="hex inactive"><svg viewbox="0 0 100 100"><path d="M50 5 L90 25 L90 75 L50 95 L10 75 L10 25 Z"></path></svg></div>
</div>
<div class="progress-text">2 de 7</div>
</div>

<div class="modulo-hex-info">
  <div class="hex-badge-img" data-step="2" role="img" aria-label="Paso 2"></div>
  <div class="info-texto">
    <h3 class="info-titulo">Cuerpo estudiantil</h3>
    <p class="info-subtitulo">Ahora cuéntanos cuántos estudiantes tienes y sus necesidades</p>
  </div>
</div>

<hr/>

<fieldset class="form-fieldset">
      <legend>Grados y estudiantes</legend>
      <label for="grados">Grados (separados por coma)</label>
      <input type="text" id="grados" placeholder="Ej: 1,2,3" />
      <p class="note">Usa solo la etiqueta del grado. Ejemplo: 1, 2, 3 o Transicion</p>
      <div id="conteoContainer" class="card-list"></div>
    </fieldset>

    <fieldset class="form-fieldset">
      <legend>Dificultades de lectura</legend>
      <div class="radio-group">
        <label><input type="radio" name="lectura_hay" value="no" checked /> No</label>
        <label><input type="radio" name="lectura_hay" value="si" /> Si</label>
      </div>
      <div id="lecturaDetalle" class="dificultad-detalle hidden"></div>
    </fieldset>

    <fieldset class="form-fieldset">
      <legend>Dificultades de escritura</legend>
      <div class="radio-group">
        <label><input type="radio" name="escritura_hay" value="no" checked /> No</label>
        <label><input type="radio" name="escritura_hay" value="si" /> Si</label>
      </div>
      <div id="escrituraDetalle" class="dificultad-detalle hidden"></div>
    </fieldset>

    <fieldset class="form-fieldset">
      <legend>Dificultades de comprension</legend>
      <div class="radio-group">
        <label><input type="radio" name="comprension_hay" value="no" checked /> No</label>
        <label><input type="radio" name="comprension_hay" value="si" /> Si</label>
      </div>
      <div id="comprensionDetalle" class="dificultad-detalle hidden"></div>
    </fieldset>

<div class="form-buttons">
  <button type="button" id = "atras" class="btn-secondary">Atrás</button>
  <button type="submit" id = "Continuar"class="btn-primary">Continuar</button>
</div>

</form></div>
</content>
<script src="main.js"></script>
<script>
  // Esperar a que main.js cargue completamente
  window.addEventListener('load', function() {
    document.getElementById("atras").addEventListener("click", function() {
      window.location.href = "01Contextualizacion.html";
    });

    document.getElementById("Continuar").addEventListener("click", function(e) {
      e.preventDefault();

      // Validar que haya grados ingresados
      if (!window.state.grados || window.state.grados.length === 0) {
        alert('Por favor ingresa al menos un grado');
        return;
      }

      // Validar que todos los grados tengan número de estudiantes
      let allGradosHaveStudents = true;
      window.state.grados.forEach(grado => {
        if (!window.state.estudiantes[grado] || window.state.estudiantes[grado] < 1) {
          allGradosHaveStudents = false;
        }
      });

      if (!allGradosHaveStudents) {
        alert('Por favor ingresa el número de estudiantes para todos los grados');
        return;
      }

      // Guardar datos del paso 2
      const stepData = {
        grados: window.state.grados,
        estudiantes: window.state.estudiantes,
        dificultades: window.state.dificultades
      };

      window.saveStepData(2, stepData);
      window.location.href = "03RecursosInstrumentos.html";
    });
  });
</script>
</body>
</html>